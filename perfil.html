<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="imagens/estrela.ico" type="image/x-icon">
    <link rel="stylesheet" href="css/produtoscss.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap"
        rel="stylesheet">

    <title>Perfil do usu√°rio</title>
</head>

<body>
    <nav class="navbar">
        <div class="navbar-content">
            <div class="bars">
                <i class="fa-solid fa-bars fa-xl"></i>
            </div>
            <img src="/imagens/estrela.ico" class="logo" />
        </div>

        <div class="navbar-content">

            <div class="cart-container">
                <div class="cart-icon">
                    <i class="fa-solid fa-cart-shopping"></i>
                    <span class="cart-count">0</span>
                </div>

                <div class="cart-menu hidden" id="cartMenu">
                    <p>Itens no carrinho:</p>
                    <ul id="cartItems" class="cart-items-list"></ul>
                    <button id="limparCarrinho" class="btn-danger">Limpar Carrinho</button>
                    <a href="checkout.html" class="btn-success">Ir para o Checkout</a>
                </div>
            </div>

            <div class="avatar">
                <img src="imagens/user-pic.jpg" alt="usuario" width="40">
                <div class="dropdown-menu setting">
                    <div class="item" id="menuLogin"><span class="fa-solid fa-door-open"></span> <a
                            href="login2.html">Login</a></div>
                    <div class="item" id="menuPerfil"><span class="fa-solid fa-user"></span><a
                            href="perfil.html">Perfil</a></div>
                    <div class="item" id="menuSair"><span class="fa-solid fa-door-open"></span><a href="javascript:void(0);" id="logoutBtn">Sair</a></div>
                </div>
            </div>
        </div>

    </nav>

    <div class="content">
        <div class="sidebar active">
            <a href="index.html" class="sidebar-nav"> <i class="icon fa-solid fa-house"></i><span>Inicio</span></a>

            <a href="maisvendidos.html" class="sidebar-nav"><i class="icon fa-solid fa-medal"></i><span>Mais
                    vendidos</span></a>

            <button class="dropdown-btn sidebar-nav">
                <i class="icon fa-solid fa-book"></i><span>G√™neros</span><i
                    class="fa-solid fa-caret-down dropdown-arrow"></i>
            </button>
            <div class="dropdown-container">
                <a href="romance.html" class="sidebar-nav"><i
                        class="icon fa-solid fa-heart"></i><span>Romance</span></a>
                <a href="biografias.html" class="sidebar-nav"><i
                        class="icon fa-solid fa-pen-nib"></i><span>Biografias</span></a>
                <a href="poesias.html" class="sidebar-nav"><i
                        class="icon fa-solid fa-feather"></i><span>Poesias</span></a>
                <a href="contos.html" class="sidebar-nav"><i
                        class="icon fa-solid fa-comment"></i><span>Contos</span></a>
            </div>

            <a href="contato.html" class="sidebar-nav"> <i
                    class="icon fa-solid fa-envelope"></i><span>Contato</span></a>

            <a href="sobre.html" class="sidebar-nav"> <i class="icon fa-solid fa-eye"></i><span>Sobre a
                    livraria</span></a>
        </div>


        <div class="wrapper">
            <div class="page-card">
                <!-- Cabe√ßalho do Perfil -->
                <div class="perfil-header" style="text-align: center; margin-bottom: 30px;">
                    <img src="imagens/user-pic.jpg" alt="Foto do usu√°rio" class="perfil-avatar" width="40" />
                    <p class="perfil-saudacao">Ol√°, <span id="emailUsuario"></span>!</p>
                </div>

                <!-- Se√ß√£o de Pedidos -->
                <section class="perfil-section" id="meus-pedidos">
                    <h3 class="title-content">üì¶ Seus Pedidos</h3>
                    <div id="lista-pedidos" class="placeholder">
                        <!-- Os pedidos ser√£o injetados aqui pelo JS -->
                    </div>
                </section>


                <!-- Se√ß√£o de Endere√ßo -->
                <section class="perfil-section">
                    <h3 class="title-content">üìç Dados de Entrega</h3>
                    <div class="placeholder"  id="dados-endereco">‚ö†Ô∏è Nenhum endere√ßo cadastrado.</div>
                </section>

                <!-- Se√ß√£o MFA -->
                <section class="perfil-section mfa-section" style="display: none;">
                    <h3 class="title-content">üîê Autentica√ß√£o em Dois Fatores (MFA)</h3>
                    <p id="mfa-status">Clique abaixo para ativar a autentica√ß√£o por aplicativo.</p>
                    <button id="ativarMfaBtn" class="btn-success">Ativar MFA</button>
                    <button id="desativarMfaBtn" class="btn-danger" style="display: none;">Desativar MFA</button>
                    <div id="qrCodeContainer" style="margin-top: 20px; display: none;"></div>
                </section>

                <!-- Se√ß√£o de Redefini√ß√£o de Senha -->
                <section class="perfil-section">
                    <h3 class="title-content">üîí Seguran√ßa da Conta</h3>

                    <form id="form-alterar-senha" action="/php/trocar_senha.php" method="post">
                        <label for="senhaAtual">Senha atual</label>
                        <input type="password" id="senhaAtual" name="senhaAtual" required>

                        <label for="novaSenha">Nova senha</label>
                        <input type="password" id="novaSenha" name="novaSenha" minlength="12" required>

                        <label for="confirmarSenha">Confirmar nova senha</label>
                        <input type="password" id="confirmarSenha" name="confirmarSenha" required>


                        <input type="hidden" name="senha_hash" id="senha_hash">
                        <input type="hidden" name="salt" id="salt">

                        <button type="submit">Alterar Senha</button>
                    </form>

                    <div id="mensagem-senha" class="hidden"></div>


                </section>

            </div>
        </div>

        <!-- Scripts -->

        <script src="js/verificarsessao.js"></script>
        <script src="js/cart.js"></script>
        <script src="js/logout.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
        
        <script src="js/padraoperfil.js"></script>
        <script src="js/senhasjs.js"></script> <!-- ou senhasjs.js adaptado -->
        <script src="js/siteui.js"></script>



</body>

</html>